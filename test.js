$(function() {
	var imgs=[ // {
		[26,26,26,26,26,26,26,26,26,27,28,29,29,30,30,30,30,30,30,30,30,30,30,30,30,30,30,29,30,29,30,29,27,25,26,24,25,25,27,28,30,37,25,27,34,52,110,158,152,158,149,149,149,148,147,134,62,42,38,44,45,45,46,42,38,39,39,39,39,39,39,39,40,40,39,39,39,39,39,40,39,40,41,41,42,43,44,44,43,43,44,44,44,44,45,44,44,44,45,45,46,46,47,47,48,49,49,50,51,51,51,50,47,47,47,47,48,48,47,47,48,48,47,48,48,49,49,49,49,49,49,50,51,51,51,52,51,51,52,52,53,53,54,54,55,55,55,55,55,55,55,55,54,54,54,55,55,56,56,57,57,58,57,56,57,58,58,58,60,61,61,60,62,61,60,60,60,60,61,61,62,63,64,63,65,64,63,64,65,67,66,66,73,70,80,94,112,139,155,153,152,152,153,154,155,155,156,155,155,155,156,156,156,156,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,156,156,156,156,156,156,156,156,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,158,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,157,158,158,159,158,157,156,151,152,150,148,147,144,135,127,103,83,76,90,106,124,139,142,144,131,108,85,76,91,112,125,136,150,158,153,154,153,153,156,153,154,154,151,150,139,119,103,79,79,74,76,81,77,76,88,107,123,140,149,147,134,108,84,75,88,106,123,141,153,157,153,154,156,148,140,134,112,85,73,76,78,79,78,75,80,95,109,126,141,143,129,114,94,78,76,77,78,79,77,79,94,112,127,143,155,158,154,157,160,158,160,161,160,160,160,160,159,159,160,160,154,144,124,96,75,85,103,118,137,156,157,149,132,105,77,77,100,121,139,159,165,160,160,161,162,161,159,159,162,163,161,153,137,109,84,75,86,111,128,145,156,146,133,113,83,77,76,79,77,83,75,85,110,128,144,160,162,164,162,161,163,163,162,165,164,172,158,147,129,95,77,79,99,122,142,156,158,143,126,97,83,80,84,81,78,81,75,91,119,138,155,157,144,130,102,77,81,103,131,145,159,167,166,165,166,167,161,152,132,107,85,78,79,81,80,81,80,78,78,80,76,76,86,111,139,156,160,157,139,112,87,75,84,115,138,155,160,158,143,122,92,79,84,111,131,154,163,157,138,110,88,75,78,79,82,82,82,81,81,83,81,76,84,109,134,151,166,172,172,170,167,168,163,144,126,103,83,83,105,133,155,166,166,151,132,106,86,84,101,131,156,164,163,152,132,109,87,88,105,133,150,168,173,170,171,174,173,174,175,177,178,177,176,175,173,174,174,173,161,141,116,98,88,86,87,88,88,87,88,88,88,88,83,92,119,146,162,168,171,173,173,173,175,170,151,124,105,91,91,118,145,157,168,167,150,126,106,93,85,108,146,158,167,162,148,125,105,97,93,111,141,160,167,174,174,172,174,177,177,177,177,177,177,178,175,175,175,176,170,158,138,118,103,96,96,94,91,93,88,89,113,145,160,168,163,139,123,106,92,96,92,95,90,92,87,104,138,156,168,173,172,173,174,177,168,149,133,115,104,98,99,98,103,102,88,100,122,149,167,173,177,179,180,180,179,164,143,129,110,98,100,104,102,103,98,92,111,144,163,165,156,141,129,114,97,100,121,157,166,172,168,153,135,120,109,100,116,154,168,169,181,179,179,179,180,181,182,183,182,182,182,182,182,182,183,184,184,184,184,184,184,185,185,185,185,185,185,184,184,184,184,184,184,184,184,185,185,185,185,184,184,184,184,183,183,184,184,185,185,186,186,185,185,185,185,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,183,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,181,178,179,180,181,181,180,179,180,177,181,178,162,139,115,103,100,100,95,91,92,91,88,88,89,87,87,88,88,88,87,86,85,85,85,84,84,83,83,82,82,81,81,81,80,81,80,80,79,79,77,75,75,77,78,77,76,77,77,77,77,76,76,76,76,76,75,74,73,74,74,73,72,72,74,76,76,74,73,73,73,71,69,69,68,68,69,69,70,68,68,68,68,68,69,69,69,69,69,69,69,69,69,70,70,70,69,67,67,68,68,67,65,64,63,64,64,64,64,63,63,63,63,63,63,63,62,62,62,63,62,61,62,63,63,62,61,62,62,62,62,62,62,62,63,61,62,62,62,62,62,61,61,62,61,60,60,59,60,60,60,63,63,62,62,62,61,61,61,59,58,59,58,58,58,58,57,63,58,57,57,55,50,49,51,58,58,59,59,59,59,58,58,60,59,58,58,58,59,60,60,60,59,59,60,62,64,64,63],
		[47,44,40,45,48,43,46,64,72,110,122,115,120,122,114,112,111,103,88,54,43,48,51,69,101,115,118,115,117,115,111,112,114,114,113,112,112,112,112,112,114,114,114,116,118,117,117,118,119,114,107,109,114,111,89,66,43,48,57,56,75,106,108,105,110,84,54,42,44,50,50,48,43,45,47,47,47,46,46,46,50,49,49,48,47,47,46,46,46,47,47,47,46,47,48,49,43,42,59,54,45,62,84,105,117,117,117,118,118,119,118,119,120,119,119,119,119,119,119,119,119,119,119,119,119,120,120,120,120,120,121,121,122,123,123,124,123,123,123,123,124,124,124,124,121,121,121,121,121,121,121,121,119,119,120,120,121,122,122,123,123,123,123,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,122,123,123,125,124,124,123,122,122,122,122,122,121,121,121,121,123,123,123,123,123,123,123,123,124,124,124,125,125,125,125,125,124,124,124,125,125,125,125,125,125,125,125,125,125,125,125,125,124,124,124,125,124,125,124,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,126,125,126,125,126,125,126,125,127,126,127,126,127,126,127,127,127,127,127,128,128,128,128,128,127,127,127,128,128,128,128,128,128,128,128,128,128,128,128,128,129,130,130,131,131,132,132,132,130,130,131,132,132,133,134,134,134,136,138,141,145,147,151,152,151,151,152,153,154,155,155,155,156,153,154,154,150,151,148,136,81,60,88,137,139,113,55,59,104,136,129,79,50,53,55,50,51,56,55,49,77,133,133,78,54,58,63,56,58,102,144,148,149,152,148,150,149,153,135,79,65,103,149,146,146,145,152,133,80,62,106,144,141,108,63,64,122,147,148,145,144,132,72,59,56,59,60,61,54,52,86,136,141,122,69,59,93,144,149,151,148,146,150,148,148,95,62,60,61,57,70,132,151,154,153,152,152,150,156,145,97,58,87,146,156,152,150,151,140,84,54,104,142,145,130,71,57,89,137,140,114,58,51,49,57,52,53,54,53,51,49,69,126,144,131,76,52,83,136,141,123,65,52,90,140,141,108,53,52,52,55,50,77,128,136,90,55,53,55,50,55,90,143,144,142,145,130,65,53,90,145,140,102,55,54,56,54,53,48,56,64,119,148,145,149,152,134,77,49,58,56,52,60,113,140,119,62,59,61,60,53,66,134,152,148,150,153,126,70,63,110,149,152,155,152,147,99,60,58,63,60,63,59,59,74,136,151,134,88,65,116,158,152,158,159,161,137,81,77,134,162,163,163,163,164,165,165,165,140,86,75,123,162,165,163,168,169,165,167,162,169,164,156,102,77,96,151,156,146,97,73,109,152,159,145,102,81,114,156,168,168,168,170,171,172,172,172,172,172,172,172,172,172,172,172,172,174,172,171,171,172,172,170,169,165,139,91,74,115,160,156,131,73,68,72,65,67,115,155,147,99,64,70,65,70,68,70,64,84,132,158,158,157,162,146,88,70,103,154,154,131,75,72,120,149,146,107,67,67,76,70,65,103,152,160,160,156,142,90,67,76,68,70,73,122,159,155,103,82,92,147,163,167,164,171,168,164,166,152,104,76,81,75,70,99,150,158,136,81,80,120,157,161,137,93,82,124,161,169,171,170,167,168,169,167,136,90,88,124,158,154,109,80,78,78,74,94,149,164,156,112,88,91,145,164,143,105,86,89,84,86,108,159,169,170,170,176,176,173,176,153,110,99,123,170,173,179,179,182,182,182,183,184,184,184,185,185,185,185,186,187,187,187,188,186,187,188,188,189,188,188,188,188,188,188,188,189,189,189,189,189,189,189,189,189,190,190,190,190,190,190,190,190,190,190,190,189,189,189,190,190,190,190,190,191,191,191,191,191,191,191,191,191,191,191,191,192,192,192,192,192,192,192,193,193,194,194,194,193,193,193,193,193,193,193,193,193,193,193,193,194,194,194,194,194,194,194,194,194,194,194,194,194,194,195,195,195,195,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,196,197,197,197,197,197,197,197,197,197,197,197,197,197,197,197,197,197,197,197,197,199,198,198,198,198,198,198,197,199,199,199,199,200,200,200,200,200,200,200,200,199,199,199,199,200,200,200,200,200,200,200,200,199,199,200,201,201,201,201,200,201,201,201,202,202,202,202,202,203,203,203,203,203,203,203,203,203,203,203,203,203,203,203,203,203,203,203,203,203,204,204,204,204,204,204,205,205,205,205,205,205,205,205,205,206,206,206,206,205,205,205,205,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,207,207,207,208,208,208,208,208,208,208,208],
		[17,17,17,18,18,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,19,19,18,18,18,19,19,19,20,20,22,22,22,23,23,22,23,22,23,22,23,21,22,21,22,21,22,21,22,24,24,24,25,25,26,26,26,24,24,24,25,25,26,26,26,25,25,25,26,26,26,26,26,28,28,28,28,28,28,27,28,29,27,27,29,29,30,35,42,67,64,62,62,64,68,70,70,70,70,68,67,66,65,65,66,69,66,63,64,67,68,67,65,66,64,63,65,67,68,67,65,69,69,70,70,78,79,119,220,241,242,242,243,243,244,244,244,244,244,245,245,245,245,244,245,244,244,244,244,244,244,243,243,241,243,239,238,165,131,217,140,149,232,239,242,211,107,84,132,211,120,161,237,230,129,82,91,196,151,84,78,188,237,240,238,238,221,111,173,203,107,200,237,238,232,152,115,213,122,82,92,217,236,234,233,128,145,207,102,74,112,206,123,140,234,230,144,72,67,73,128,212,98,157,199,84,181,166,76,67,71,101,217,229,182,84,194,151,100,208,131,122,230,234,241,238,235,141,72,66,73,127,229,234,149,106,212,128,118,210,104,146,233,235,238,239,226,115,68,75,191,151,70,70,149,229,224,110,68,74,188,230,201,82,64,86,207,115,127,214,103,148,232,236,239,238,238,239,239,238,238,238,239,239,239,238,238,238,238,237,237,237,237,237,237,236,235,235,234,233,232,153,63,58,49,52,49,44,44,43,42,41,41,39,38,37,37,37,37,37,36,36,35,35,35,35,35,34,33,33,32,32,32,33,33,33,32,32,31,31,31,33,33,33,32,32,31,31,31,29,29,28,28,29,30,32,34,32,30,28,28,29,30,29,28,27,26,26,25,25,26,26,27,27,27,27,27,27,27,27,27,26,26,26,25,25,24,24,24,22,22,22,22,22,22,22,22,22,21,21,20,20,21,21,22,22,21,21,20,20,19,19,19,20,20,20,20,20,20,20,20,19,19,19,19,19,19,19,19,21,20,19,19,18,17,16,16,17,17,17,17,17,17,17,17],
		[94,91,88,87,88,89,89,88,82,80,79,79,80,79,77,74,75,76,77,79,78,78,78,78,73,76,81,85,87,86,84,83,80,83,80,83,90,92,106,130,163,196,218,226,233,235,234,238,237,237,237,237,237,237,237,237,236,236,236,236,236,236,236,236,235,235,235,235,235,235,235,235,233,232,232,232,233,233,231,229,227,218,201,181,165,159,163,168,173,161,155,152,153,159,149,122,92,86,80,86,102,122,137,144,148,147,127,106,110,129,155,181,199,210,219,221,217,210,199,190,182,176,178,191,203,203,196,190,178,167,155,151,156,162,164,162,170,184,195,195,187,173,147,124,90,81,78,90,110,125,133,137,143,135,117,94,78,74,74,74,75,88,108,126,134,137,145,155,159,152,146,148,157,166,171,172,190,203,215,220,221,221,219,215,207,193,181,176,173,173,185,200,210,214,213,203,193,178,151,127,105,110,128,139,137,144,154,154,150,145,141,146,153,155,147,139,140,146,150,147,140,137,140,145,149,145,139,135,134,125,102,81,68,71,85,112,140,163,179,190,189,177,165,159,155,146,138,135,126,114,88,71,66,69,90,122,148,168,187,191,184,175,168,164,168,174,185,194,191,179,168,165,164,172,182,191,202,208,205,197,184,168,155,152,148,140,134,136,145,151,163,176,189,198,204,207,205,203,200,191,174,156,148,150,156,165,173,175,170,155,130,109,85,69,53,49,63,84,101,109,106,99,90,79,64,50,47,50,68,93,104,103,103,103,110,126,136,146,155,154,145,132,122,118,119,111,102,98,104,117,130,138,151,162,172,175,176,178,178,177,177,175,173,173,173,171,168,166,158,143,120,105,103,105,98,88,78,71,59,52,56,73,98,117,126,129,123,105,87,81,84,88,81,71,59,49,38,27,23,23,30,47,65,72,67,62,63,67,75,73,66,58,59,73,87,94,105,101,89,68,48,35,25,18,18,18,28,46,60,60,52,46,55,66,79,88,91,84,66,49,34,25,22,34,54,68,76,80,73,58,43,40,46,49,42,33,36,43,54,65,74,78,78,77,69,54,36,22,13,13,23,34,38,33,27,25,31,38,36,28],
		'img1.png',
		'img3.jpg',
		[24,25,26,27,27,27,27,26,27,27,27,27,26,26,26,26,27,27,27,28,28,29,29,29,30,30,31,32,32,33,34,33,35,37,41,49,87,156,203,206,184,174,165,161,155,147,144,147,145,137,130,127,127,128,125,122,121,123,124,125,123,120,116,114,117,117,118,119,120,118,113,110,107,102,101,103,104,104,106,111,120,125,142,183,229,246,242,246,247,247,247,248,247,248,248,248,247,247,247,247,247,247,247,247,247,247,247,247,247,247,247,247,241,247,242,244,242,242,239,206,155,184,205,169,160,211,237,236,235,223,182,118,99,158,201,179,146,194,229,229,193,127,93,110,182,184,136,96,96,177,223,237,237,237,238,228,189,145,192,196,161,161,218,232,238,235,210,157,157,196,174,114,85,129,204,230,236,232,220,167,152,194,182,129,84,106,178,187,147,166,210,230,216,158,97,74,77,89,170,184,156,152,190,175,140,172,185,145,92,73,73,94,173,217,224,192,147,161,184,158,144,179,179,148,177,216,230,234,234,233,220,182,124,76,71,79,147,203,225,212,167,159,187,173,146,176,186,156,158,201,222,233,233,232,227,196,144,89,87,159,168,149,101,77,142,198,219,203,153,104,78,148,196,222,204,153,107,76,141,168,153,152,179,172,154,175,204,224,232,234,235,235,235,235,235,235,235,235,235,235,235,235,235,234,235,235,235,235,234,234,234,234,233,234,233,233,233,232,231,230,231,216,178,128,83,59,52,52,49,47,44,42,43,43,42,40,39,39,39,38,39,38,38,38,38,37,35,34,32,31,30,30,33,32,31,30,30,30,30,31,28,28,29,30,32,33,34,34,28,28,28,28,28,28,28,28,28,28,28,27,27,26,26,26,28,28,28,27,27,26,26,26,25,25,25,25,25,25,25,25,23,23,23,24,24,25,25,25,26,26,26,26,26,26,26,26,26,27,27,27,27,26,25,24,22,22,22,22,22,22,22,22,21,21,21,21,21,21,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,19,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,19,19,18,17,17,16,15,15],
		[3,3,3,3,3,4,4,4,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,7,6,7,7,7,7,10,8,11,15,21,48,88,98,103,109,113,112,108,105,104,107,105,105,103,104,103,103,104,104,94,91,95,99,107,128,152,164,198,225,225,218,217,219,220,210,181,145,126,122,120,108,96,95,95,95,95,93,91,88,87,85,83,80,78,76,75,73,73,73,72,70,70,72,72,70,69,68,68,68,68,68,68,68,69,62,63,64,65,66,66,64,65,62,62,62,62,62,62,63,63,60,60,59,59,59,58,57,58,62,62,45,33,40,43,38,40,39,39,39,40,40,41,41,41,41,41,41,42,42,43,43,43,44,46,47,47,48,50,55,58,84,212,229,223,237,226,234,231,232,231,231,232,232,233,233,233,233,233,233,234,234,233,232,230,193,113,199,109,192,230,226,177,76,96,186,116,186,215,144,71,98,181,76,77,182,229,230,228,197,112,190,118,182,233,226,187,116,185,98,72,174,230,229,195,114,190,98,71,154,158,132,222,199,81,64,63,159,160,129,183,108,190,103,61,64,133,220,199,107,185,122,164,158,140,225,229,230,225,136,71,58,117,216,215,130,171,153,144,185,121,214,231,234,228,171,81,95,181,120,71,144,218,187,90,85,180,223,164,73,106,178,121,185,152,167,223,233,235,235,237,237,237,236,236,236,236,235,235,235,236,236,236,235,237,235,236,230,239,215,128,60,54,48,45,46,46,44,42,40,39,41,39,38,38,37,36,35,35,35,34,35,34,34,34,34,34,34,33,33,32,32,32,33,33,33,32,32,31,31,31,29,29,29,29,29,29,29,29,28,29,29,30,30,29,29,28,28,28,28,29,29,30,30,30,30,30,30,29,29,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,28,28,27,27,27,27,27,27,28,28,29,29,29,28,28,28,28,28,28,28,28,27,27,27,27,27,27,27,27,27,27,27,26,26,25,25,25,24,25,24,25,24,25,24,25,22,23,22,23,22,23,22,23],
		'img2.png',
	]; // }
	$('button').click(function() {
		$('button').remove();
		var cur=-1;
		function next() {
			cur++;
			var $preview=$('#preview').css({'position':'relative', 'padding-top':'10px'}).empty(), width;
			function resultCallback(result) {
				console.log(result);
				if (result.value) {
					alert(value);
				}
				if (result.left) {
					$('<div class="marker" style="left:'+result.left+'px;width:'+(result.bitsize*result.quietSize)+'px"/>').appendTo($preview);
				}
				if (result.right) {
					$('<div class="marker" style="left:'+result.right+'px;width:'+(result.bitsize*result.quietSize)+'px;background:red"/>').appendTo($preview);
				}
				if (result.leftMarker) {
					$('<div class="marker" style="left:'+result.leftMarker[0]+'px;width:'+(result.bitsize)+'px;background:blue"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.leftMarker[1]+'px;width:'+(result.bitsize)+'px"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.leftMarker[2]+'px;width:'+(result.bitsize)+'px;background:blue"/>').appendTo($preview);
				}
				if (result.middleMarker) {
					$('<div class="marker" style="left:'+result.middleMarker[0]+'px;width:'+(result.bitsize)+'px;background:blue"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.middleMarker[1]+'px;width:'+(result.bitsize)+'px"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.middleMarker[2]+'px;width:'+(result.bitsize)+'px;background:blue"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.middleMarker[3]+'px;width:'+(result.bitsize)+'px"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.middleMarker[4]+'px;width:'+(result.bitsize)+'px;background:blue"/>').appendTo($preview);
				}
				if (result.rightMarker) {
					$('<div class="marker" style="left:'+result.rightMarker[0]+'px;width:'+(result.bitsize)+'px;background:blue"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.rightMarker[1]+'px;width:'+(result.bitsize)+'px"/>').appendTo($preview);
					$('<div class="marker" style="left:'+result.rightMarker[2]+'px;width:'+(result.bitsize)+'px;background:blue"/>').appendTo($preview);
				}
				if (result.lbytes) {
					var lbytes=result.lbytes;
					for (var i=0;i<lbytes.length;i++) {
						var bits=lbytes[i].split('');
						for (var j=0;j<bits.length;++j) {
							$('<div class="marker" style="left:'+(result.bcStart+result.bitsize*(i*7+j+3))+'px;width:'+(result.bitsize)+'px;background:'+(bits[j]=='1'?'black':'white')+'"/>').appendTo($preview);
						}
					}
				}
				if (result.rbytes) {
					var rbytes=result.rbytes;
					for (var i=0;i<rbytes.length;i++) {
						var bits=rbytes[i].split('');
						for (var j=0;j<bits.length;++j) {
							$('<div class="marker" style="left:'+(result.bcStart+result.bitsize*(i*7+j+8+6*7))+'px;width:'+(result.bitsize)+'px;background:'+(bits[j]=='1'?'black':'white')+'"/>').appendTo($preview);
						}
					}
				}
			}
			if (typeof imgs[cur] !== 'string') {
				for (var i=0;i<imgs[cur].length;++i) {
					var p=imgs[cur][i];
					$('<div style="position:absolute;left:'+i+'px;top:0;height:100px;width:1px;background:rgb('+p+', '+p+', '+p+');"/>').appendTo($preview);
				}
				width=imgs[cur].length;
				var kbarcode=new KBarcode(imgs[cur], resultCallback, 1);
				kbarcode.check();
				$preview.prepend(kbarcode.canvas);
				return;
			}
			$('<img src="img/'+imgs[cur]+'"/>').css('display', 'block')
				.load(function() {
					var $this=$(this);
					width=$this[0].naturalWidth;
					var kbarcode=new KBarcode($this[0], resultCallback, 1);
					kbarcode.check();
					$preview.prepend(kbarcode.canvas);
				})
				.appendTo($('#preview').empty());
		}
		next();
	}).click();
});
